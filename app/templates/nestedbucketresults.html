{% extends "layout.html" %}
{% block title %}skbl.se - {{ title }}{% endblock %}
{% block content %}
<div class="col-md-8">
    {{ test}}
    <h1>{{ title }}</h1>
    {% if infotext %}
    <p>{{ infotext}}</p>
    <br/>
    {% endif %}
    <ul>
       {% for maintype, val in sorted(results.items()) %}
          <li class="keyword_list_item nested_part"> <h4>{{ maintype }}</h4>
            {% if len(val.items()) <= 8 %}
              {% for subtype, subval in sorted(val.items()) %}
              <ul>
                <li class="keyword_list_item">
                  <a href="{{ url_for(name+'_'+g.language, result='|'.join(subval), title=maintype+' - '+subtype) }}">{{ subtype }}&nbsp;
                    <span class="badge">{{ len(subval) }}</span>
                  </a>
                </li>
              </ul>
              {% endfor %}
            {% else %}
              <div style="display:none" class="nested_container hidden_first">
                {% for subtype, subval in sorted(val.items()) %}
                <ul>
                  <li class="keyword_list_item">
                    <a href="{{ url_for(name+'_'+g.language, result='|'.join(subval), title=maintype+' - '+subtype) }}">{{ subtype }}&nbsp;
                      <span class="badge">{{ len(subval) }}</span>
                    </a>
                  </li>
                </ul>
                {% endfor %}
              </div>
              <div style="" class="nested_container shown_first">
                <ul>
                {% for subtype, subval in sorted(val.items()) %}
                  {% if loop.index < 8 %}
                  <li class="keyword_list_item">
                    <a href="{{ url_for(name+'_'+g.language, result='|'.join(subval), title=maintype+' - '+subtype) }}">{{ subtype }}&nbsp;
                      <span class="badge">{{ len(subval) }}</span>
                    </a>
                  </li>
                  {% endif %}
                {% endfor %}
                </ul>
                <div class="fadeout">
                  <span class="label label-default">fler...</span>
                </div>
              </div>
            {% endif %}
          </li>
       {% endfor %}
    </ul>
</div>
<div class="col-md-4">

</div>
{% endblock %}
{% block foot %}
    {{ super() }}
    <script>
        jQuery(document).ready(function() {
            jQuery(".fadeout").click(function() {
                jQuery(this).parent().siblings(".hidden_first").toggle();
                jQuery(this).parent().toggle();
            });
        });
    </script>
{% endblock %}
