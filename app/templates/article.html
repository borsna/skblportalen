{% extends "layout.html" %}
{% block title %}skbl.se - {{ title }}{% endblock %}

{% block head %}
{{super()}}
<link rel="alternate" type="application/json" href="{{ url_for('article_json_'+g.language, id=article_id) }}" />
{% endblock %}

{% block content %}
<div itemscope itemtype="http://schema.org/Person">
    <div class="col-md-8">
        <h1 itemprop="name">{{ article.showname }}</h1>
        <h4 itemprop="additionalName">{{ article.fullfirstname }}</h4>
        <h4 itemprop="jobTitle">{{ article.subtitle }}</h4>
        <p>{{ article.text|safe }}</p>
        <br/>
        <p><em>{{ article.article_author.firstname }} {{ article.article_author.lastname }}</em></p>
        {% if article.relation %}
        <div id="familjeforhallanden_lista" class="ellipsis">
            <h4 class="ellipsis_header"><span class="ellipsis_plus glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Familjeförhållanden ({{ article.relation|length }})</h4>
            <ul class="ellipsis_contents">
            {% for relation in article.relation %}
                <li>
                    <h5>{{ relation.type }}: {{ relation.firstname }} {{ relation.lastname }}</h5>
                </li>
            {% endfor %}
            </ul>
        </div>
        {% endif %}
        {% if article.education %}
        <div id="organisationer_lista" class="ellipsis">
            <h4 class="ellipsis_header"><span class="ellipsis_plus glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Utbildning ({{ article.education|length }})</h4>
            <ul class="ellipsis_contents">
            {% for education in article.education %}
                <li>
                    <h5>{{ education.type }}: {{ education.description }}</h5>
                </li>
            {% endfor %}
            </ul>
        </div>
        {% endif %}
        {% if article.occupation %}
        <div id="organisationer_lista" class="ellipsis">
            <h4 class="ellipsis_header"><span class="ellipsis_plus glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Verksamhet ({{ article.occupation|length }})</h4>
            <ul class="ellipsis_contents">
            {% for occupation in article.occupation %}
                <li>
                    <h5>{{ occupation.type }}: {{ occupation.description }}</h5>
                </li>
            {% endfor %}
            </ul>
        </div>
        {% endif %}
        {% if article.contact %}
        <div id="kontakter_lista" class="ellipsis">
            <h4 class="ellipsis_header"><span class="ellipsis_plus glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Kontakter ({{ article.contact|length }})</h4>
            <ul class="ellipsis_contents">
            {% for contact in article.contact %}
                <li>
                    <h5>{{ contact.type }}: {{ contact.firstname }} {{ contact.lastname }}</h5>
                </li>
            {% endfor %}
            </ul>
        </div>
        {% endif %}
        {% if article.organisation %}
        <div id="organisationer_lista" class="ellipsis">
            <h4 class="ellipsis_header"><span class="ellipsis_plus glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Organisationer ({{ article.organisation|length }})</h4>
            <ul class="ellipsis_contents">
            {% for organisation in article.organisation %}
                <li>
                    <h5>{{ organisation.name }}</h5>
                    <span>{{ organisation.description }}</span>
                </li>
            {% endfor %}
            </ul>
        </div>
        {% endif %}
        {% if article.places %}
        <div id="bostadsorter_lista" class="ellipsis">
            <h4 class="ellipsis_header"><span class="ellipsis_plus glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Bostadsorter ({{ article.places|length }})</h4>
            <ul class="ellipsis_contents">
            {% for place in article.places %}
                <li>
                    <h5>{{ place.place.place }}</h5>
                </li>
            {% endfor %}
            </ul>
        </div>
        {% endif %}
        {% if article.awards %}
        <div id="priser_lista" class="ellipsis">
            <h4 class="ellipsis_header"><span class="ellipsis_plus glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Priser/utmärkelser ({{ article.awards|length }})</h4>
            <ul class="ellipsis_contents">
            {% for award in article.awards %}
                <li>
                    <h5>{{ award.type }}: {{ award.description }}</h5>
                </li>
            {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>
    <div class="col-md-4">
        {% if article.portrait %}
        <div class="image-overlay">
            <img src="{{ article.portrait[0].url }}" itemprop="image" alt="{{ article.portrait[0].description }}" width="360px">
        </div>
        {{ article.portrait[0].description }}
        {% endif %}
        {% if get_date(article) %}
            <span itemprop="birthDate">{{ get_date(article)[0] }}</span> &mdash; <span itemprop="deathDate">{{ get_date(article)[1] }}</span>
        {% endif %}
        {% if article.keyword %}
            <h3>{{ gettext("Keywords") }}</h3>
            {% for keyword in article.keyword %}
                <a href="{{ url_for('keyword_'+g.language, result=keyword) }}"><span class="badge">{{ keyword }}</span></a></span>
            {% endfor %}
        {% endif %}

        <!--
        <h3>{{ gettext("Othernames") }}</h3>
        {% for name in article.othernames %}
            <p><b>{{name.type}}:</b> <span itemprop="additionalName">{{name.name}}</span></p>
        {% endfor %}
        -->

        {% if article.externallink %}
            <h3>{{ gettext("Links") }}</h3>
            <ul>
            {% for link in article.externallink %}
                <li><a href="{{ link.url }}">{{ link.description }}</a></span></li>
            {% endfor %}
            </ul>
        {% endif %}
    </div>
</div>
{% endblock %}
{% block foot %}
    {{ super() }}
    <script>
        jQuery(document).ready(function() {
            jQuery(".ellipsis_header").click(function() {
                jQuery(this).siblings(".ellipsis_contents").toggle("slow");
                jQuery(this).find(".ellipsis_plus").toggle();
            });
        });
    </script>
{% endblock %}